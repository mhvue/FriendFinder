<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Questions</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    



</head>
<body>
<div class="container">
    <h2>Survey Questions</h2>
<hr>

    <form class="needs-validation" novalidate></form>
    <div class="form-row">
        <div class="col">
            <label for="validationCustom01">Your Name</label>
            <input type="text" class="form-control"  id="firstNameInput" placeholder="Name (Required)" required>
        </div>
        <div class="col">
            <label for="validationCustom02">Your Photo</label>
            <input type="text" class="form-control" id="photoInput" placeholder="url of photo (Required)" required>
        </div>
    </div>
    </form>
    <br>
    <h4>Rank each statement below from 1-5, with 1 being you Strongly Agree to 5 being Strongly Disagree</h4>
    <br>
    
    <form>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q1) You enjoy the outdoors</h5>
                <select class="custom-select mr-sm-2" id="Q1">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q2) Comedy is one of your favorite movie genres</h5>
                <select class="custom-select mr-sm-2" id="Q2">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q3) Exercising is a hobby </h5>
                <select class="custom-select mr-sm-2" id="Q3">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q4) You like to try new things </h5>
                <select class="custom-select mr-sm-2" id="Q4">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q5) You enjoy staying home and watching Netflix</h5>
                <select class="custom-select mr-sm-2" id="Q5">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q6) You like to cook </h5>
                <select class="custom-select mr-sm-2" id="Q6">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q7) You enjoy reading</h5>
                <select class="custom-select mr-sm-2" id="Q7">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q8) Texting is your preferred communiction </h5>
                <select class="custom-select mr-sm-2" id="Q8">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q9) You enjoy pop music</h5>
                <select class="custom-select mr-sm-2" id="Q9">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </div>
    
        <div class="form-row align-items-center">
            <div class="col-auto my-1">
                <h5>Q10) Coffee is a must! </h5>
                <select class="custom-select mr-sm-2" id="Q10">
                    <option selected>Choose...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

        </div>  
        <br>
        <button id = "submitBtn"><a href="/app/data/friends.js" class="btn btn-primary btn-lg btn-block" type="submit">Submit form</button></a>
        <br>
      </form>

      <footer class="footer">
        <div class="container">
          <p><a href="/api/friends" target="_blank">API Friends Link</a> | <a href="https://github.com/mhvue/FriendFinder.git" target ="_blank">GitHub Repo</a>
        </div>
      </footer>

 </div>
      <!-- Best Match Modal- code from bootstrap-->
      <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="Friend Match" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="friendMatchTitle">Your Friend Match is here!</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h2 id="friendMatch-name"></h2>
            <img id="friendMatch-img" src="" alt="">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>

      <div class="modal fade" id="MsgModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Request Failed!</h4>
                </div>
                <div class="modal-body">
                    <p>There has been an issue submitting your request. Please return to the form to ensure all fields are properly filled out. If you are still unable to submit please contact your manager directly.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-dark" data-dismiss="modal">Try again</button>
                </div>
            </div>
        </div>
    </div>

 <script type = "text/javascript">

 $("#submitBtn").on("click", function () {
    event.preventDefault();

    var userAns = {
    name: $("#firstNameInput, #lastNameInput").val().trim(),
    photo: $("#photoInput").val(),
    scores:[
        $("#Q1").val(),
        $("#Q2").val(),
        $("#Q3").val(),
        $("#Q4").val(),
        $("#Q5").val(),
        $("#Q6").val(),
        $("#Q7").val(),
        $("#Q8").val(),
        $("#Q9").val(),
        $("#Q10").val(),
    ]
}

 //add validation here

//  validation if presses submit w/o answering any of the questions 
 var count = 0;  
 for(var i =0; i <=9; i++){
     count++

    if( $("#Q" + count).val() === "Choose..."){
        console.log("true")
     $("#Msgmodal").modal("show");
    }
    else {
        break;
    }
}

//validation for if no name entered, no photo url entered, and if any single question missed
    if(userAns.name == ""){
     $("#firstNameInput").after("Please input name").css("background-color","orange");
       console.log(userAns.name);
    }   
    else if(userAns.photo == "" && !userAns.name == ""){
        $("#firstNameInput").css("background-color","white");
        $("#photoInput").after("Please input photo").css("background-color","orange");
    }
    else if(!userAns.photo == "" && !userAns.name == ""){
        $("#firstNameInput").css("background-color","white");
        $("#photoInput").css("background-color","white");
    }

    else if( 
        $("#Q1").val() == "Choose..." ||
        $("#Q2").val()  == "Choose..." ||
        $("#Q3").val()  == "Choose..." ||
        $("#Q4").val() == "Choose..." ||
        $("#Q5").val() == "Choose..." ||
        $("#Q6").val() == "Choose..." ||
        $("#Q7").val() == "Choose..." ||
        $("#Q8").val() == "Choose..." ||
        $("#Q9").val() == "Choose..."||
        $("#Q10").val() == "Choose..."
        ) {
    alert("Please complete all questions.")
     }

    else{
        $.post("/api/friends", userAns, (function(data){
            $("#friendMatch-name").text(data.name);
            $("#friendMatch-img").attr("src", data.photo).width("300px");
            $("#modal").modal("toggle");
    }));

}
  
});
    </script>
</body>
</html>


